/*
Generated time: November 28, 2024 04:02
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
jQuery(document).ready(function(s){/*s(".ext-feed_wrap.items_one-fifth").slick({slidesToShow:5,rows:1,slidesToScroll:1,arrows:!1,autoplay:!0,autoplaySpeed:1500,responsive:[{breakpoint:1200,settings:{slidesToShow:4}},{breakpoint:960,settings:{slidesToShow:3}},{breakpoint:768,settings:{rows:2,slidesToScroll:2,slidesToShow:2,dots:!1}},{breakpoint:640,settings:{rows:2,slidesToScroll:2,slidesToShow:2,dots:!1}}]}),s(".ext-feed_wrap.items_one-third").slick({slidesToShow:3,slidesToScroll:1,arrows:!1,autoplay:!0,responsive:[{breakpoint:960,settings:{slidesToShow:2}},{breakpoint:640,settings:{slidesToShow:1}}]}),s(".ext-feed_wrap.items_one-quarter").slick({slidesToShow:4,slidesToScroll:1,arrows:!1,autoplay:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:640,settings:{slidesToShow:1}}]}),s(".ext-feed_wrap.items_one-sixth").slick({slidesToShow:6,slidesToScroll:1,arrows:!1,autoplay:!0,responsive:[{breakpoint:1200,settings:{slidesToShow:5}},{breakpoint:1024,settings:{slidesToShow:4}},{breakpoint:960,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:640,settings:{slidesToShow:1}}]}),*/if (window.innerWidth >= 99768) {s(".logo-carousel_wrap").slick({slidesToShow:6,slidesToScroll:1,arrows:!1,autoplay:!0,responsive:[{breakpoint:1200,settings:{slidesToShow:5}},{breakpoint:960,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:640,settings:{slidesToShow:2}}]})}});

/*ATC from cart icon on product grid*/
class ShopifyCart {
  constructor() {
    this.initAddToCartButtons();
  }

  initAddToCartButtons() {
    const addToCartButtons = document.querySelectorAll('.js-add-to-cart');
    addToCartButtons.forEach(button => {
      button.addEventListener('click', (e) => this.handleAddToCart(e));
    });
  }

  async handleAddToCart(event) {
    // Prevent the click from bubbling up to the product link
    event.preventDefault();
    event.stopPropagation();

    const button = event.currentTarget;
    const productId = button.dataset.productId;
    const variantId = button.dataset.variantId;

    if (!productId || !variantId) {
      console.error('Product or variant ID missing');
      return;
    }

    // Add loading state
    button.classList.add('loading');

    try {
      const formData = {
        items: [{
          id: variantId,
          quantity: 1
        }]
      };

      const response = await fetch('/cart/add.js', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      });

      if (!response.ok) {
        throw new Error('Network response was not ok');
      }

      const result = await response.json();
      
      // Update cart count or show confirmation
      // You can trigger a cart drawer open here if needed
      console.log('Added to cart:', result);

    } catch (error) {
      console.error('Error adding to cart:', error);
      // Handle error - show error message to user
    } finally {
      // Remove loading state
      button.classList.remove('loading');
    }
  }
}

// Initialize cart functionality
document.addEventListener('DOMContentLoaded', () => {
  new ShopifyCart();
  if (!window.gw) {
    window.gw = {};
  }
  const wishlistIcons = document.querySelectorAll('.js-wishlist-btn');  
wishlistIcons.forEach(function (icon) {  
  icon.addEventListener('click', handleWishlistClick.bind(icon));  
});  

function handleWishlistClick(event) {  
  event.stopPropagation();  
  event.preventDefault();  

  // Check if the parent has class .grid-product__content  
  const parentContent = this.closest('.grid-product__content');  
  if (parentContent) {  
    // Select the parent element containing the shadow root  
    const wishlistPlaceholder = parentContent.querySelector('.gw-add-to-wishlist-product-card-placeholder');  

    if (wishlistPlaceholder) {  
      // Access the shadow root  
      const shadowRoot = wishlistPlaceholder.shadowRoot;  

      if (shadowRoot) {  
        // Find the button inside the shadow root  
        const wishlistButton = shadowRoot.querySelector('.gw-toggle-wishlist-product-card-button');  

        if (wishlistButton) {  
          // Trigger a click on the button  
          wishlistButton.click();  
          console.log('Wishlist button clicked!');  

          // Add a class to the clicked icon to indicate it was successfully added  
          this.classList.add('wishlist-added');  

          // Open the Growave wishlist drawer  
          if (typeof window.gw !== 'undefined' && window.gw.wishlists && window.gw.wishlists.openWishlistsDrawer) {  
            window.gw.wishlists.openWishlistsDrawer();  
            console.log('Wishlist drawer opened.');  
          } else {  
            console.log('Growave SDK or openWishlistsDrawer method is not available.');  
          }  
        } else {  
          console.log('Wishlist button not found inside shadow root.');  
        }  
      } else {  
        console.log('Shadow root not found.');  
      }  
    } else {  
      console.log('Wishlist placeholder not found.');  
    }  
  }  
}  

  const ProductwishlistIcons = document.querySelectorAll('.js-wishlist-img-btn');
  ProductwishlistIcons.forEach(function(icon) {
    icon.addEventListener('click', ProducthandleWishlistClick.bind(icon));
  });
  
  function ProducthandleWishlistClick(event) {
    event.stopPropagation();
    event.preventDefault();
    // Check if the parent has class .product__main-photos
    const parentContent = this.closest('.product__main-photos');
    if (parentContent) {
      // Select the parent element containing the shadow root
      const wishlistPlaceholder = document.querySelector('.gw-wl-add-to-wishlist-placeholder');
      
      if (wishlistPlaceholder) {
        // Access the shadow root
        const shadowRoot = wishlistPlaceholder.shadowRoot;
      
        if (shadowRoot) {
          // Find the button inside the shadow root
          const wishlistButton = shadowRoot.querySelector('.gw-button');
      
          if (wishlistButton) {
            // Trigger a click on the button
            wishlistButton.click();
            console.log('Wishlist button clicked!');
          } else {
            console.log('Wishlist button not found inside shadow root.');
          }
        } else {
          console.log('Shadow root not found.');
        }
      } else {
        console.log('Wishlist placeholder not found.');
      }
    }
  }

});

// Event listener for quick view modal content loaded  
document.addEventListener('quickview:loaded', function(event) {  
  setTimeout(function() {  
    // Trigger a resize event on the window  
    window.dispatchEvent(new Event('resize'));  
  }, 100);  
});  

// Event listener for quick view modal opened  
document.addEventListener('quickview:open', function(event) {  
  setTimeout(function() {  
    // Trigger a resize event on the window  
    window.dispatchEvent(new Event('resize'));  
  }, 100);  
});  

document.addEventListener('DOMContentLoaded', function() {
  // Initialize preview content
  function initializePreviewContent() {
    document.querySelectorAll('[data-content-preview]').forEach(preview => {
      const full = preview.closest('.rte').querySelector('[data-content-full]');
      if (!full) return;

      const fullContent = full.innerHTML;
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = fullContent;
      
      // Get text content while preserving HTML tags
      const words = [];
      let currentWord = '';
      let insideTag = false;
      let currentTag = '';
      
      for (let i = 0; i < fullContent.length; i++) {
        const char = fullContent[i];
        
        if (char === '<') {
          insideTag = true;
          if (currentWord) {
            words.push(currentWord);
            currentWord = '';
          }
          currentTag += char;
        } else if (char === '>') {
          insideTag = false;
          currentTag += char;
          words.push(currentTag);
          currentTag = '';
        } else if (insideTag) {
          currentTag += char;
        } else if (char === ' ') {
          if (currentWord) {
            words.push(currentWord);
            currentWord = '';
          }
          words.push(' ');
        } else {
          currentWord += char;
        }
      }
      
      if (currentWord) {
        words.push(currentWord);
      }
      
      // Count actual words (excluding HTML tags)
      let actualWordCount = 0;
      words.forEach(word => {
        if (!word.startsWith('<') && word.trim()) {
          actualWordCount++;
        }
      });
      
      // Only process if there are more than 30 words
      if (actualWordCount > 30) {
        // Take first 30 actual words (excluding HTML tags)
        let wordCount = 0;
        let previewContent = '';
        
        for (let i = 0; i < words.length && wordCount < 30; i++) {
          const word = words[i];
          if (word.startsWith('<')) {
            previewContent += word;
          } else {
            previewContent += word;
            if (word.trim()) {
              wordCount++;
            }
          }
        }
        
        preview.querySelector('.preview-content').innerHTML = previewContent;
        preview.querySelector('.more-text').style.display = 'inline';
        preview.style.display = 'block';
        full.style.display = 'none';
      } else {
        // If less than 30 words, just show full content
        preview.style.display = 'none';
        full.style.display = 'block';
        // Remove the less button if it exists
        const lessBtn = full.querySelector('.read-less-btn');
        if (lessBtn) {
          lessBtn.remove();
        }
      }
    });
  }

  // Initialize on page load
  initializePreviewContent();

  // Tab click handling
  document.body.addEventListener('click', function(event) {
    const button = event.target.closest('.product-tabs__nav-btn');
    if (!button) return;

    const container = button.closest('.product-tabs');
    const tabButtons = container.querySelectorAll('.product-tabs__nav-btn');
    const tabPanels = container.querySelectorAll('.product-tabs__content');

    tabButtons.forEach(btn => {
      btn.classList.remove('is-active');
      btn.setAttribute('aria-selected', 'false');
    });
    tabPanels.forEach(panel => panel.classList.remove('is-active'));

    button.classList.add('is-active');
    button.setAttribute('aria-selected', 'true');

    const panelId = button.getAttribute('aria-controls');
    const panel = container.querySelector(`#${panelId}`);
    if (panel) {
      panel.classList.add('is-active');
    }
  });

  // Read more/less handling
  document.body.addEventListener('click', function(event) {
    const moreBtn = event.target.closest('.read-more-btn');
    const lessBtn = event.target.closest('.read-less-btn');
    
    if (moreBtn) {
      const content = moreBtn.closest('.rte');
      const preview = content.querySelector('[class$="-preview"]');
      const full = content.querySelector('[class$="-full"]');
      
      if (preview && full) {
        preview.style.display = 'none';
        full.style.display = 'block';
      }
    }
    
    if (lessBtn) {
      const content = lessBtn.closest('.rte');
      const preview = content.querySelector('[class$="-preview"]');
      const full = content.querySelector('[class$="-full"]');
      const tabsNav = lessBtn.closest('.product-tabs').querySelector('.product-tabs__nav');
      
      if (preview && full) {
        preview.style.display = 'block';
        full.style.display = 'none';
        tabsNav.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }
  });
});

//for icons on product grid
function applyMetaHeightToIcons() {  
  // Select all .grid-product__content elements  
  const productGrids = document.querySelectorAll('.grid-product__content');  

  productGrids.forEach(grid => {  
    // Find the .grid-product__meta within the current grid  
    const metaElement = grid.querySelector('.grid-product__meta');  

    // Check if both elements exist  
    if (grid && metaElement) {  
      // Get the height of the meta element  
      const metaHeight = metaElement.offsetHeight + 10;  

      // Find the corresponding .icons-container (you'll need to adjust the selector if it's not a direct child)  
      const iconsContainer = grid.querySelector('.icons-container'); // Or a more specific selector  

      if (iconsContainer) {  
        // Apply the height as a style variable  
        iconsContainer.style.setProperty('--meta-height', `${metaHeight}px`);   
      } else {  
        console.warn('.icons-container not found within .grid-product__content', grid);  
      }  
    } else {  
      console.warn('.grid-product__meta not found within .grid-product__content', grid);  
    }  
  });  
}  


// Initial execution  
applyMetaHeightToIcons();  
window.addEventListener('resize', applyMetaHeightToIcons);

// Handle dynamic changes (if products are added/removed dynamically)  
if (typeof window.MutationObserver !== 'undefined') { // Check if MutationObserver is supported  
  const observer = new MutationObserver(mutations => {  
    applyMetaHeightToIcons();  // Re-calculate and apply heights when DOM changes  
  });  

  observer.observe(document.body, { childList: true, subtree: true }); // Observe changes in the body  
} else {  
  // Fallback for browsers without MutationObserver (older browsers)  
  // You might consider using a polling mechanism or relying on events if dynamic updates are crucial in these browsers.  
  console.warn("MutationObserver not supported. Dynamic height updates may not work correctly.");  
  window.addEventListener('resize', applyMetaHeightToIcons); // Less ideal, but a basic fallback.  
}