{%- style -%}
#shopify-section-{{ section.id }} .logo-bar { opacity: {{ section.settings.logo_opacity | divided_by: 100.0 }}; }
#shopify-section-{{ section.id }} .section-header__title { font-family: 'Antipasto Regular', var(--typeHeaderFallback); }
#shopify-section-{{ section.id }} .logo-bar__item { text-align: center; }
#shopify-section-{{ section.id }} .logo-bar__caption {
  font-family: 'Avenir Regular', var(--typeBaseFallback);
  margin-top: 10px;
  font-size: 14px;
  line-height: 1.3;
}
{%- endstyle -%}

{%- if section.blocks.size > 0 -%}
  <div class="logo-bar logo-bar--{{ section.id }}">
    {%- for block in section.blocks -%}
      {%- assign anchor = block.settings.anchor_target | strip -%}
      {%- if anchor == 'none' -%}{%- assign anchor = '' -%}{%- endif -%}

      {%- assign logo_href = '' -%}
      {%- if anchor != blank -%}
        {%- assign logo_href = anchor -%}
        {%- unless logo_href contains '#' -%}
          {%- assign logo_href = '#' | append: logo_href -%}
        {%- endunless -%}
      {%- elsif block.settings.link != blank -%}
        {%- assign logo_href = block.settings.link -%}
      {%- endif -%}

      <div class="logo-bar__item" {{ block.shopify_attributes }}>
        {%- if logo_href != blank -%}
          <a href="{{ logo_href }}" class="logo-bar__link">
        {%- endif -%}

        {%- if block.settings.image != blank -%}
          {%- render 'image-element',
            img: block.settings.image,
            widths: '180, 360, 540, 720',
            classes: 'logo-bar__image',
            sizeVariable: '160px',
            fallback: '110px'
          -%}
        {%- else -%}
          {{ 'logo' | placeholder_svg_tag: 'placeholder-svg' }}
        {%- endif -%}

        {%- if block.settings.caption != blank -%}
          <div class="logo-bar__caption">{{ block.settings.caption | escape }}</div>
        {%- endif -%}

        {%- if logo_href != blank -%}
          </a>
        {%- endif -%}
      </div>
    {%- endfor -%}
  </div>
{%- endif -%}


{% schema %}
{
  "name": "t:sections.logo-list.name",
  "class": "index-section",
  "max_blocks": 10,
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "t:sections.logo-list.settings.title.label"
    },
    {
      "type": "range",
      "id": "logo_opacity",
      "label": "t:sections.logo-list.settings.logo_opacity.label",
      "default": 76,
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "%"
    },
    {
      "type": "checkbox",
      "id": "divider",
      "label": "t:sections.logo-list.settings.divider.label",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "logo_image",
      "name": "t:sections.logo-list.blocks.logo.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.logo-list.blocks.logo.settings.image.label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.logo-list.blocks.logo.settings.link.label",
          "info": "t:sections.logo-list.blocks.logo.settings.link.info"
        },
        {
          "type": "text",
          "id": "anchor_target",
          "label": "Jump-to anchor (e.g. organic-cotton)",
          "default": "none",
          "info": "Enter the ID of the target section (no #). Example: organic-cotton"
        },
        {
          "type": "text",
          "id": "caption",
          "label": "Text under logo",
          "default": "default"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.logo-list.presets.logo_list.name",
      "blocks": [
        { "type": "logo_image" },
        { "type": "logo_image" },
        { "type": "logo_image" },
        { "type": "logo_image" }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["footer", "header", "custom.popups"]
  }
}
{% endschema %}

